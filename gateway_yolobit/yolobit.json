{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</variable><variable id=\"cdz0;EAe1|+gZA:gJ1kz\">val</variable></variables><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"-312\" y=\"-388\"></block><block type=\"yolobit_events_timer\" id=\"3}D8CM)L4x5NVZ|Y}m:p\" x=\"-1162\" y=\"-213\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\".+.M+oqwnhht5.5C*)vy\"><field name=\"NUM\">0.5</field></shadow></value><statement name=\"ACTION\"><block type=\"variables_set\" id=\"U%AkjZyeD9#E@P;pA^#k\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field><value name=\"VALUE\"><block type=\"yolobit_device_read_terminal\" id=\"VJ4I|XQSfhP;iNrv9FXZ\"></block></value><next><block type=\"controls_if\" id=\"a5#q2(L{Zhi:_w4bDZ4P\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"xUP`h%InxWwAB[6T9uv)\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"q}@iQ6+B/^u1+zxPy*h|\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"y=h0h|u1D|k{e|xt^*=-\"><field name=\"TEXT\">R</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_relay\" id=\"scidI$`sWB`hXbZ2x=y~\"><field name=\"state\">1</field><field name=\"NAME\">pin13</field></block></statement><next><block type=\"controls_if\" id=\"$u.8h86Ggzf:`uks=;r=\"><value name=\"IF0\"><block type=\"logic_compare\" id=\":4mLv%+[.=T8YF(3cIz~\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"37|f$WI#pSj3@hPE7U:/\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"-0RS*=Sr2ocV.hH0vKtV\"><field name=\"TEXT\">r</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_relay\" id=\"%muARJbX$e#Q,qB}w@F;\"><field name=\"state\">0</field><field name=\"NAME\">pin13</field></block></statement><next><block type=\"controls_if\" id=\"[uP#fimd)!5ly,/41H-J\"><value name=\"IF0\"><block type=\"logic_operation\" id=\"f:c@@a=3`uCp{FNU3e?!\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\" id=\"KtQ:K}M]ML@g-,#3cJ_f\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"text_length\" id=\"sF{6i_yBwQ/C9VvN`y5r\"><value name=\"VALUE\"><shadow type=\"text\" id=\"My.-A.D7khTLu.@`~(UK\"><field name=\"TEXT\">abc</field></shadow><block type=\"variables_get\" id=\"U7,aG6:b:==I~0g^Kvz_\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"VT!CEIbOMNf;Ed]nkG.f\"><field name=\"NUM\">4</field></block></value></block></value><value name=\"B\"><block type=\"logic_compare\" id=\"hZ@t6DJY.pd|@Lsy](i%\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"text_charAt\" id=\"O+MdgZ|)Q!-o[*gT0ha7\"><mutation at=\"false\"></mutation><field name=\"WHERE\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\")%oV8}JPR9FaWt0m4=!)\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\"rGUw6__An(oE9~[#$8KE\"><field name=\"TEXT\">B</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"e7=]P*9SlCXB3RMRMAEo\"><field name=\"VAR\" id=\"cdz0;EAe1|+gZA:gJ1kz\">val</field><value name=\"VALUE\"><block type=\"math_tonum\" id=\"W$3E`K-LvjMCLYEh.tPi\"><value name=\"A\"><block type=\"text_getSubstring\" id=\"?BDYLgq=}vxwBw_hRM%D\"><mutation at1=\"true\" at2=\"true\"></mutation><field name=\"WHERE1\">FROM_START</field><field name=\"WHERE2\">FROM_START</field><value name=\"STRING\"><block type=\"variables_get\" id=\"kfgIE7f=9(KvM,:9Rp^-\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"AT1\"><block type=\"math_number\" id=\"EccGEEOst~|)iqw6oO.$\"><field name=\"NUM\">2</field></block></value><value name=\"AT2\"><block type=\"math_number\" id=\"0cbZJrtihUs;1#A%V^kR\"><field name=\"NUM\">4</field></block></value></block></value></block></value><next><block type=\"aiot_dual_usb\" id=\"nfxl+57d7m.])-$N*/k,\"><field name=\"NAME\">pin14</field><value name=\"percent\"><shadow type=\"math_number\" id=\"PKAXK,2zF$dj1ph$O9V2\"><field name=\"NUM\">70</field></shadow><block type=\"variables_get\" id=\"]$WP-g{yS7k2RIxxnXxt\"><field name=\"VAR\" id=\"cdz0;EAe1|+gZA:gJ1kz\">val</field></block></value></block></next></block></statement><next><block type=\"controls_if\" id=\"PZq~PxH|b}^{Kzr;sT9%\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"n3]qh)i{]Sui9f}_U!E!\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"EmZCFz%Ixo!l?.fF]JV6\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"T3A5@m7W]X|NhowP*pMG\"><field name=\"TEXT\">SC</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_pin_servo_write_angle\" id=\"1bBm*I=R$UN_un]ZvWWQ\"><field name=\"pin\">11</field><value name=\"angle\"><shadow type=\"math_number\" id=\"@nxy{|*XyA:+V!zyU:sW\"><field name=\"NUM\">90</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"cfkmgu;qGm+`*)!;k}bw\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"}C+[~A^0N%TocT.a$3HS\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"m5POYveKbQ#6jX8/)5)H\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"*wet8-{+K1#0IDjKa0FN\"><field name=\"TEXT\">SO</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_pin_servo_write_angle\" id=\"qI_;]xW`J_7Za2vzA7wP\"><field name=\"pin\">11</field><value name=\"angle\"><shadow type=\"math_number\" id=\"C`2yi]~ae.$*IX_yl.,9\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"u0*SGr{36B%6?Klh`y1)\"><value name=\"IF0\"><block type=\"logic_operation\" id=\"Xx+]x9bI:`xh3-^fKAJ;\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_compare\" id=\"![oGgd|SE3;5QB+`D+/A\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"text_length\" id=\"O_EJ`*(9|jco34K,K4kh\"><value name=\"VALUE\"><shadow type=\"text\" id=\"My.-A.D7khTLu.@`~(UK\"><field name=\"TEXT\">abc</field></shadow><block type=\"variables_get\" id=\"z?psDCd#o0tdYy0M{Qqi\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value></block></value><value name=\"B\"><block type=\"math_number\" id=\"n2JPO8X(:A1V9Q[/[7$,\"><field name=\"NUM\">4</field></block></value></block></value><value name=\"B\"><block type=\"logic_compare\" id=\";W^*4Ls(isAS)yn7|S6W\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"text_charAt\" id=\"u2kIn+lUZ-`Y@n]*:u|~\"><mutation at=\"false\"></mutation><field name=\"WHERE\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"^dFvu5IO*:c2G4%*:zZj\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\".jXr=jjLI3EaWF5UP-yL\"><field name=\"TEXT\">F</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"Xwjlq79qR}_Q:][K`}o3\"><field name=\"VAR\" id=\"cdz0;EAe1|+gZA:gJ1kz\">val</field><value name=\"VALUE\"><block type=\"math_tonum\" id=\"6FNHDdN[Pa;djCL`ORD,\"><value name=\"A\"><block type=\"text_getSubstring\" id=\"O[o_Wd+43:Bk87Sez|5]\"><mutation at1=\"true\" at2=\"true\"></mutation><field name=\"WHERE1\">FROM_START</field><field name=\"WHERE2\">FROM_START</field><value name=\"STRING\"><block type=\"variables_get\" id=\":0e7^W;D}jmq{lM*wexr\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"AT1\"><block type=\"math_number\" id=\"xECu@#0,7}k%/V0FG1dt\"><field name=\"NUM\">2</field></block></value><value name=\"AT2\"><block type=\"math_number\" id=\"CNz]54Zrqb6e;VX4HYv5\"><field name=\"NUM\">4</field></block></value></block></value></block></value><next><block type=\"aiot_minifan\" id=\"db$LPTQQ+7OO0Z$MN];.\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\"e0LP6z*zT.Zt^k-ZYAS]\"><field name=\"NUM\">70</field></shadow><block type=\"variables_get\" id=\"8i@BHKvLwa~.:#N:zJvs\"><field name=\"VAR\" id=\"cdz0;EAe1|+gZA:gJ1kz\">val</field></block></value></block></next></block></statement><next><block type=\"controls_if\" id=\"g0qJ(z;%.48mwYozo]-{\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"vCZ[$!p/B$2au|lH3hVn\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"F|qAqqf_%:3*~Xo;t8Zb\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"i$g)`bHqR4.x/23_?d.6\"><field name=\"TEXT\">RGB1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"O9$$n2a/XVf}~52ye)M*\"><field name=\"port\">pin2</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"dg)K%Y=8-w@zjk8@vXAj\"><field name=\"COLOUR\">#ffffff</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"%q_Dl*oI-H]5=I4i{%JL\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"siIQC}@-Q.Roe[c^N`);\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"WBoVEa+V2I;d($C.($q{\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"o!qwHN?yD^-X_6H|_ra$\"><field name=\"TEXT\">RGB0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_led_tiny_set_all\" id=\"]xXx=eD?0j^XM~_:}esq\"><field name=\"port\">pin2</field><field name=\"option\">0</field><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"YO8}7:]Bs%rxR^FfXaDt\"><field name=\"COLOUR\">#000000</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"`6m?,,t|lxv4aMgE#n!{\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"$Qqg9kDq9{_HNu#m^q.X\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"=WKlCtiZsSPx;#R}CwVS\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"k#7Qdw{)Cocc[v1nj@@4\"><field name=\"TEXT\">LCD1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_backlight\" id=\"tSxHWOpSU(:+s1e(@nV)\"><field name=\"action\">on</field><next><block type=\"aiot_lcd1602_clear\" id=\"fVuZ.:t9[/A*/*MwqF@^\"><next><block type=\"aiot_lcd1602_display\" id=\"7PyG~`u$Ul-vhWWU[%-X\"><value name=\"string\"><shadow type=\"text\" id=\"|+V;56CntXVMAe6kN9%y\"><field name=\"TEXT\">DADN CNPM</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"f$iD7?]|x+2}X3B^6V$m\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"=1BpcKF=|,qu$Q.d`q(4\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"D-PO!)b1Vcs$$AbuP[El\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"ZhDl[9jY_tvDAv]C70@U\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"j4Fx`tsXNRo|$k@cdUFr\"><field name=\"VAR\" id=\"L?Au2=Vr87cn~%(X,L=U\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"f01v|pwA{Jss=o9M(Y9p\"><field name=\"TEXT\">LCD0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_backlight\" id=\"Vivedqu)c1)%^!,s_#tA\"><field name=\"action\">off</field></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"N/9*wf/URF,`+f}1#`M3\" x=\"-113\" y=\"-138\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"zj_8HIiQBg/9O,b~5.K+\"><field name=\"NUM\">3</field></shadow></value><statement name=\"ACTION\"><block type=\"aiot_dht_measure\" id=\"Y4}!hI}q1w(R.JlnL8IF\"><next><block type=\"xbot_serial_write_string\" id=\"#2.T(!dJ|g;4sb@6F-n9\"><value name=\"string\"><shadow type=\"text\" id=\"a[NHXO6;BcG*IBe9[-g8\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"Or;f$XK|j_5bw-~n#$+g\"><mutation items=\"9\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"vo+N3+3mkNWT=(a]3Yh8\"><field name=\"TEXT\">!</field></block></value><value name=\"ADD1\"><block type=\"aiot_light_sensor\" id=\"woaRhG1Y[)f}FUnrpi$J\"><field name=\"NAME\">pin0</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"vtB]h{~=T85awnoNxQs,\"><field name=\"TEXT\">:</field></block></value><value name=\"ADD3\"><block type=\"aiot_dht_read\" id=\"SKRb.2LN5B$czls2ubMx\"><field name=\"DATA\">TEMP</field></block></value><value name=\"ADD4\"><block type=\"text\" id=\"/48/Gl+[2L!;Yt9DV8Pf\"><field name=\"TEXT\">:</field></block></value><value name=\"ADD5\"><block type=\"aiot_dht_read\" id=\"t0JW,!4y6^6skJA}_y5,\"><field name=\"DATA\">HUMID</field></block></value><value name=\"ADD6\"><block type=\"text\" id=\"9j,`GLmR|Zeb3BG[$Kxo\"><field name=\"TEXT\">:</field></block></value><value name=\"ADD7\"><block type=\"yolobit_pin_read_digital\" id=\"oA7rI4JPbk4c,gOQFzp^\"><field name=\"pin\">1</field></block></value><value name=\"ADD8\"><block type=\"text\" id=\"I6Q|.-8UNpH1N_vj`J2L\"><field name=\"TEXT\">#</field></block></value></block></value></block></next></block></statement></block></xml>","python":"from event_manager import *\nimport sys\nimport uselect\nfrom yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nfrom aiot_rgbled import RGBLed\nfrom aiot_lcd1602 import LCD1602\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\n\nevent_manager.reset()\n\ndef read_terminal_input():\n  spoll=uselect.poll()        # Set up an input polling object.\n  spoll.register(sys.stdin, uselect.POLLIN)    # Register polling object.\n\n  input = ''\n  if spoll.poll(0):\n    input = sys.stdin.read(1)\n\n    while spoll.poll(0):\n      input = input + sys.stdin.read(1)\n\n  spoll.unregister(sys.stdin)\n  return input\n\ntiny_rgb = RGBLed(pin2.pin, 4)\n\naiot_lcd1602 = LCD1602()\n\ndef on_event_timer_callback_D_C_M_L_x():\n  global cmd, val\n  cmd = read_terminal_input()\n  if cmd == 'R':\n    pin13.write_digital(1)\n  if cmd == 'r':\n    pin13.write_digital(0)\n  if len(cmd) == 4 and cmd[0] == 'B':\n    val = int((cmd[1 : 4]))\n    pin14.write_analog(round(translate(val, 0, 100, 0, 1023)))\n  if cmd == 'SC':\n    pin11.servo_write(90)\n  if cmd == 'SO':\n    pin11.servo_write(0)\n  if len(cmd) == 4 and cmd[0] == 'F':\n    val = int((cmd[1 : 4]))\n    pin10.write_analog(round(translate(val, 0, 100, 0, 1023)))\n  if cmd == 'RGB1':\n    tiny_rgb.show(0, hex_to_rgb('#ffffff'))\n  if cmd == 'RGB0':\n    tiny_rgb.show(0, hex_to_rgb('#000000'))\n  if cmd == 'LCD1':\n    aiot_lcd1602.backlight_on()\n    aiot_lcd1602.clear()\n    aiot_lcd1602.move_to(0, 0)\n    aiot_lcd1602.putstr('DADN CNPM')\n  if cmd == 'LCD0':\n    aiot_lcd1602.backlight_off()\n\nevent_manager.add_timer_event(500, on_event_timer_callback_D_C_M_L_x)\n\naiot_dht20 = DHT20(SoftI2C(scl=Pin(22), sda=Pin(21)))\n\ndef on_event_timer_callback_N_w_f_U_R():\n  global cmd, val\n  aiot_dht20.read_dht20()\n  print((''.join([str(x) for x in ['!', round(translate((pin0.read_analog()), 0, 4095, 0, 100)), ':', aiot_dht20.dht20_temperature(), ':', aiot_dht20.dht20_humidity(), ':', pin1.read_digital(), '#']])), end =' ')\n\nevent_manager.add_timer_event(3000, on_event_timer_callback_N_w_f_U_R)\n\nwhile True:\n    pass\n","name":"untitled","extensions":[{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"}],"device":"yolobit"}